"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/cloud-history";
exports.ids = ["pages/api/cloud-history"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcloud-history&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcloud-history%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcloud-history&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcloud-history%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/cloud-history/index.ts */ \"(api)/./pages/api/cloud-history/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/cloud-history\",\n        pathname: \"/api/cloud-history\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_cloud_history_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNsb3VkLWhpc3RvcnkmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNsb3VkLWhpc3RvcnklMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMrRDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsOERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDhEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NvZGVmbG93LXR1dG9yaWFsLXZpZXdlci8/ZGM4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2Nsb3VkLWhpc3RvcnkvaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jbG91ZC1oaXN0b3J5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2xvdWQtaGlzdG9yeVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcloud-history&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcloud-history%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/cloud-history/index.ts":
/*!******************************************!*\
  !*** ./pages/api/cloud-history/index.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Define backend URL from environment or use default\nconst BACKEND_URL = process.env.BACKEND_URL || \"http://localhost:8000\";\nasync function handler(req, res) {\n    // Only allow GET requests\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        // Get the limit parameter or use default\n        const limit = parseInt(req.query.limit) || 20;\n        // Call the backend API to get evaluations\n        const evaluationsPromise = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${BACKEND_URL}/latest-evaluations?limit=${limit}`);\n        // Also get the current jobs to check for running jobs\n        const jobsPromise = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${BACKEND_URL}/jobs`);\n        // Wait for both requests to complete\n        const [evaluationsResponse, jobsResponse] = await Promise.all([\n            evaluationsPromise,\n            jobsPromise\n        ]);\n        // Get evaluations\n        let evaluations = evaluationsResponse.data.evaluations || [];\n        // Get jobs\n        const jobs = jobsResponse.data || [];\n        // Add running jobs to the evaluations list\n        const runningJobs = jobs.filter((job)=>job.status === \"running\" || job.status === \"failed\");\n        // Map of job IDs already in evaluations to avoid duplicates\n        const existingJobIds = new Set(evaluations.filter((e)=>e.job_id).map((e)=>e.job_id));\n        // Add running jobs to evaluations if they're not already there\n        for (const job of runningJobs){\n            if (job.project_name && !existingJobIds.has(job.id)) {\n                const timestamp = new Date(job.start_time);\n                // Create an evaluation entry for this running job\n                evaluations.push({\n                    id: `job_${job.id}`,\n                    project_name: job.project_name,\n                    timestamp: job.start_time,\n                    overall_score: 0,\n                    readiness_level: \"Processing...\",\n                    job_id: job.id,\n                    status: job.status,\n                    formatted_date: timestamp.toLocaleDateString(),\n                    formatted_time: timestamp.toLocaleTimeString()\n                });\n            }\n        }\n        // Add formatted date and time for all evaluations\n        evaluations = evaluations.map((evaluation)=>{\n            // If it's already been processed, just return it\n            if (evaluation.formatted_date && evaluation.formatted_time) {\n                return evaluation;\n            }\n            // Add status to each evaluation - default to 'completed' if none is provided\n            // This is important for existing evaluations that don't have status\n            let status = evaluation.status || \"completed\";\n            // If it has a job_id, check if it's in the running jobs\n            if (evaluation.job_id) {\n                const matchingJob = jobs.find((job)=>job.id === evaluation.job_id);\n                if (matchingJob) {\n                    status = matchingJob.status;\n                }\n            }\n            const date = new Date(evaluation.timestamp);\n            return {\n                ...evaluation,\n                status,\n                formatted_date: date.toLocaleDateString(),\n                formatted_time: date.toLocaleTimeString()\n            };\n        });\n        // Sort by timestamp descending (newest first)\n        evaluations.sort((a, b)=>{\n            return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();\n        });\n        // Return the response with evaluations\n        return res.status(200).json({\n            evaluations,\n            count: evaluations.length\n        });\n    } catch (error) {\n        console.error(\"Error fetching cloud history:\", error);\n        // Check if it's an axios error with a response\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error) && error.response) {\n            return res.status(error.response.status).json({\n                message: error.response.data?.detail || \"Failed to fetch cloud history\",\n                evaluations: []\n            });\n        }\n        // Generic error handling\n        return res.status(500).json({\n            message: \"Failed to fetch cloud history\",\n            evaluations: []\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUztZQUMxQyxPQUFPO2dCQUNMLEdBQUdVLFVBQVU7Z0JBQ2JyQztnQkFDQWlDLGdCQUFnQk8sS0FBS04sa0JBQWtCO2dCQUN2Q0MsZ0JBQWdCSyxLQUFLSixrQkFBa0I7WUFDekM7UUFDRjtRQUVBLDhDQUE4QztRQUM5Q3ZCLFlBQVk0QixJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7WUFDbkIsT0FBTyxJQUFJZixLQUFLZSxFQUFFaEIsU0FBUyxFQUFFaUIsT0FBTyxLQUFLLElBQUloQixLQUFLYyxFQUFFZixTQUFTLEVBQUVpQixPQUFPO1FBQ3hFO1FBRUEsdUNBQXVDO1FBQ3ZDLE9BQU85QyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCWTtZQUNBZ0MsT0FBT2hDLFlBQVlpQyxNQUFNO1FBQzNCO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNBO1FBRS9DLCtDQUErQztRQUMvQyxJQUFJdkQsMERBQWtCLENBQUN1RCxVQUFVQSxNQUFNRyxRQUFRLEVBQUU7WUFDL0MsT0FBT3BELElBQUlFLE1BQU0sQ0FBQytDLE1BQU1HLFFBQVEsQ0FBQ2xELE1BQU0sRUFBRUMsSUFBSSxDQUFDO2dCQUM1Q0MsU0FBUzZDLE1BQU1HLFFBQVEsQ0FBQ3BDLElBQUksRUFBRXFDLFVBQVU7Z0JBQ3hDdEMsYUFBYSxFQUFFO1lBQ2pCO1FBQ0Y7UUFFQSx5QkFBeUI7UUFDekIsT0FBT2YsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUVyxhQUFhLEVBQUU7UUFDakI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29kZWZsb3ctdHV0b3JpYWwtdmlld2VyLy4vcGFnZXMvYXBpL2Nsb3VkLWhpc3RvcnkvaW5kZXgudHM/OTljMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuXG4vLyBEZWZpbmUgYmFja2VuZCBVUkwgZnJvbSBlbnZpcm9ubWVudCBvciB1c2UgZGVmYXVsdFxuY29uc3QgQkFDS0VORF9VUkwgPSBwcm9jZXNzLmVudi5CQUNLRU5EX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJ1xuXG5pbnRlcmZhY2UgQ2xvdWRFdmFsdWF0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICBwcm9qZWN0X25hbWU6IHN0cmluZ1xuICB0aW1lc3RhbXA6IHN0cmluZ1xuICBvdmVyYWxsX3Njb3JlOiBudW1iZXJcbiAgcmVhZGluZXNzX2xldmVsOiBzdHJpbmdcbiAgcmVjb21tZW5kYXRpb25zX2NvdW50PzogbnVtYmVyXG4gIGpvYl9pZD86IHN0cmluZ1xuICBzdGF0dXM/OiBzdHJpbmdcbiAgZm9ybWF0dGVkX2RhdGU/OiBzdHJpbmdcbiAgZm9ybWF0dGVkX3RpbWU/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIEpvYlN0YXR1cyB7XG4gIGlkOiBzdHJpbmdcbiAgc3RhdHVzOiBzdHJpbmdcbiAgc3RhcnRfdGltZTogc3RyaW5nXG4gIGVuZF90aW1lPzogc3RyaW5nXG4gIHByb2plY3RfbmFtZT86IHN0cmluZ1xuICBvdXRwdXRfZGlyPzogc3RyaW5nXG4gIGVycm9yPzogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgLy8gT25seSBhbGxvdyBHRVQgcmVxdWVzdHNcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSBsaW1pdCBwYXJhbWV0ZXIgb3IgdXNlIGRlZmF1bHRcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCBhcyBzdHJpbmcpIHx8IDIwXG4gICAgXG4gICAgLy8gQ2FsbCB0aGUgYmFja2VuZCBBUEkgdG8gZ2V0IGV2YWx1YXRpb25zXG4gICAgY29uc3QgZXZhbHVhdGlvbnNQcm9taXNlID0gYXhpb3MuZ2V0KGAke0JBQ0tFTkRfVVJMfS9sYXRlc3QtZXZhbHVhdGlvbnM/bGltaXQ9JHtsaW1pdH1gKVxuICAgIFxuICAgIC8vIEFsc28gZ2V0IHRoZSBjdXJyZW50IGpvYnMgdG8gY2hlY2sgZm9yIHJ1bm5pbmcgam9ic1xuICAgIGNvbnN0IGpvYnNQcm9taXNlID0gYXhpb3MuZ2V0KGAke0JBQ0tFTkRfVVJMfS9qb2JzYClcbiAgICBcbiAgICAvLyBXYWl0IGZvciBib3RoIHJlcXVlc3RzIHRvIGNvbXBsZXRlXG4gICAgY29uc3QgW2V2YWx1YXRpb25zUmVzcG9uc2UsIGpvYnNSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbZXZhbHVhdGlvbnNQcm9taXNlLCBqb2JzUHJvbWlzZV0pXG4gICAgXG4gICAgLy8gR2V0IGV2YWx1YXRpb25zXG4gICAgbGV0IGV2YWx1YXRpb25zOiBDbG91ZEV2YWx1YXRpb25bXSA9IGV2YWx1YXRpb25zUmVzcG9uc2UuZGF0YS5ldmFsdWF0aW9ucyB8fCBbXVxuICAgIFxuICAgIC8vIEdldCBqb2JzXG4gICAgY29uc3Qgam9iczogSm9iU3RhdHVzW10gPSBqb2JzUmVzcG9uc2UuZGF0YSB8fCBbXVxuICAgIFxuICAgIC8vIEFkZCBydW5uaW5nIGpvYnMgdG8gdGhlIGV2YWx1YXRpb25zIGxpc3RcbiAgICBjb25zdCBydW5uaW5nSm9icyA9IGpvYnMuZmlsdGVyKGpvYiA9PiBqb2Iuc3RhdHVzID09PSAncnVubmluZycgfHwgam9iLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpXG4gICAgXG4gICAgLy8gTWFwIG9mIGpvYiBJRHMgYWxyZWFkeSBpbiBldmFsdWF0aW9ucyB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgY29uc3QgZXhpc3RpbmdKb2JJZHMgPSBuZXcgU2V0KGV2YWx1YXRpb25zLmZpbHRlcihlID0+IGUuam9iX2lkKS5tYXAoZSA9PiBlLmpvYl9pZCkpXG4gICAgXG4gICAgLy8gQWRkIHJ1bm5pbmcgam9icyB0byBldmFsdWF0aW9ucyBpZiB0aGV5J3JlIG5vdCBhbHJlYWR5IHRoZXJlXG4gICAgZm9yIChjb25zdCBqb2Igb2YgcnVubmluZ0pvYnMpIHtcbiAgICAgIGlmIChqb2IucHJvamVjdF9uYW1lICYmICFleGlzdGluZ0pvYklkcy5oYXMoam9iLmlkKSkge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShqb2Iuc3RhcnRfdGltZSlcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhbiBldmFsdWF0aW9uIGVudHJ5IGZvciB0aGlzIHJ1bm5pbmcgam9iXG4gICAgICAgIGV2YWx1YXRpb25zLnB1c2goe1xuICAgICAgICAgIGlkOiBgam9iXyR7am9iLmlkfWAsICAvLyBUZW1wb3JhcnkgSURcbiAgICAgICAgICBwcm9qZWN0X25hbWU6IGpvYi5wcm9qZWN0X25hbWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBqb2Iuc3RhcnRfdGltZSxcbiAgICAgICAgICBvdmVyYWxsX3Njb3JlOiAwLCAgLy8gTm8gc2NvcmUgeWV0XG4gICAgICAgICAgcmVhZGluZXNzX2xldmVsOiAnUHJvY2Vzc2luZy4uLicsXG4gICAgICAgICAgam9iX2lkOiBqb2IuaWQsXG4gICAgICAgICAgc3RhdHVzOiBqb2Iuc3RhdHVzLFxuICAgICAgICAgIGZvcm1hdHRlZF9kYXRlOiB0aW1lc3RhbXAudG9Mb2NhbGVEYXRlU3RyaW5nKCksXG4gICAgICAgICAgZm9ybWF0dGVkX3RpbWU6IHRpbWVzdGFtcC50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgZm9ybWF0dGVkIGRhdGUgYW5kIHRpbWUgZm9yIGFsbCBldmFsdWF0aW9uc1xuICAgIGV2YWx1YXRpb25zID0gZXZhbHVhdGlvbnMubWFwKGV2YWx1YXRpb24gPT4ge1xuICAgICAgLy8gSWYgaXQncyBhbHJlYWR5IGJlZW4gcHJvY2Vzc2VkLCBqdXN0IHJldHVybiBpdFxuICAgICAgaWYgKGV2YWx1YXRpb24uZm9ybWF0dGVkX2RhdGUgJiYgZXZhbHVhdGlvbi5mb3JtYXR0ZWRfdGltZSkge1xuICAgICAgICByZXR1cm4gZXZhbHVhdGlvblxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgc3RhdHVzIHRvIGVhY2ggZXZhbHVhdGlvbiAtIGRlZmF1bHQgdG8gJ2NvbXBsZXRlZCcgaWYgbm9uZSBpcyBwcm92aWRlZFxuICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIGV4aXN0aW5nIGV2YWx1YXRpb25zIHRoYXQgZG9uJ3QgaGF2ZSBzdGF0dXNcbiAgICAgIGxldCBzdGF0dXMgPSBldmFsdWF0aW9uLnN0YXR1cyB8fCAnY29tcGxldGVkJ1xuICAgICAgXG4gICAgICAvLyBJZiBpdCBoYXMgYSBqb2JfaWQsIGNoZWNrIGlmIGl0J3MgaW4gdGhlIHJ1bm5pbmcgam9ic1xuICAgICAgaWYgKGV2YWx1YXRpb24uam9iX2lkKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nSm9iID0gam9icy5maW5kKGpvYiA9PiBqb2IuaWQgPT09IGV2YWx1YXRpb24uam9iX2lkKVxuICAgICAgICBpZiAobWF0Y2hpbmdKb2IpIHtcbiAgICAgICAgICBzdGF0dXMgPSBtYXRjaGluZ0pvYi5zdGF0dXNcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZXZhbHVhdGlvbi50aW1lc3RhbXApXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5ldmFsdWF0aW9uLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGZvcm1hdHRlZF9kYXRlOiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpLFxuICAgICAgICBmb3JtYXR0ZWRfdGltZTogZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gU29ydCBieSB0aW1lc3RhbXAgZGVzY2VuZGluZyAobmV3ZXN0IGZpcnN0KVxuICAgIGV2YWx1YXRpb25zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKVxuICAgIH0pXG4gICAgXG4gICAgLy8gUmV0dXJuIHRoZSByZXNwb25zZSB3aXRoIGV2YWx1YXRpb25zXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICBldmFsdWF0aW9ucyxcbiAgICAgIGNvdW50OiBldmFsdWF0aW9ucy5sZW5ndGhcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNsb3VkIGhpc3Rvcnk6JywgZXJyb3IpXG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgaXQncyBhbiBheGlvcyBlcnJvciB3aXRoIGEgcmVzcG9uc2VcbiAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSAmJiBlcnJvci5yZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLnJlc3BvbnNlLmRhdGE/LmRldGFpbCB8fCAnRmFpbGVkIHRvIGZldGNoIGNsb3VkIGhpc3RvcnknLFxuICAgICAgICBldmFsdWF0aW9uczogW10gXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBHZW5lcmljIGVycm9yIGhhbmRsaW5nXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNsb3VkIGhpc3RvcnknLFxuICAgICAgZXZhbHVhdGlvbnM6IFtdXG4gICAgfSlcbiAgfVxufSAiXSwibmFtZXMiOlsiYXhpb3MiLCJCQUNLRU5EX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJsaW1pdCIsInBhcnNlSW50IiwicXVlcnkiLCJldmFsdWF0aW9uc1Byb21pc2UiLCJnZXQiLCJqb2JzUHJvbWlzZSIsImV2YWx1YXRpb25zUmVzcG9uc2UiLCJqb2JzUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZXZhbHVhdGlvbnMiLCJkYXRhIiwiam9icyIsInJ1bm5pbmdKb2JzIiwiZmlsdGVyIiwiam9iIiwiZXhpc3RpbmdKb2JJZHMiLCJTZXQiLCJlIiwiam9iX2lkIiwibWFwIiwicHJvamVjdF9uYW1lIiwiaGFzIiwiaWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwic3RhcnRfdGltZSIsInB1c2giLCJvdmVyYWxsX3Njb3JlIiwicmVhZGluZXNzX2xldmVsIiwiZm9ybWF0dGVkX2RhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJmb3JtYXR0ZWRfdGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImV2YWx1YXRpb24iLCJtYXRjaGluZ0pvYiIsImZpbmQiLCJkYXRlIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsImNvdW50IiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNBeGlvc0Vycm9yIiwicmVzcG9uc2UiLCJkZXRhaWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/cloud-history/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcloud-history&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcloud-history%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();